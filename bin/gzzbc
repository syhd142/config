#!/bin/bash
export PATH=.:/sbin:/usr/sbin:/usr/local/sbin:/usr/local/bin:/bin:/usr/bin:/usr/local/bin

###########################################################################
export LC_ALL="zh_CN.UTF-8"

BASE_DOMAIN="zzbc.qihoo.net"
MAIN_DOMAIN="imgse.zzbc.qihoo.net"

clusters_confirm()
{
    read num
    if [ $num = "q" ]; then
        exit 0;
    fi
    CLUSTERS_ARR=(${CLUSTERS})
    if [[ $num =~ ^[0-9]+$ ]] ; then 
        echo "w${num}.$MAIN_DOMAIN"
    else 
        echo "请输入正确的机器号,退出(q)"  
        clusters_confirm
    fi
	return 0;
}

if [[ $1 =~ ^[0-9]+$ ]] 
then 
    host="w$1.$MAIN_DOMAIN"
elif [[ -n $1 ]]
then
    host="$1.$MAIN_DOMAIN"
else
    echo '
    ============ 服务器列表 ============ 
    [未知功能机器]                   
    w001.imgse.zzbc.qihoo.net  
    w002.imgse.zzbc.qihoo.net  
    w003.imgse.zzbc.qihoo.net  
    w004.imgse.zzbc.qihoo.net  
    w005.imgse.zzbc.qihoo.net  
    w006.imgse.zzbc.qihoo.net  
    w007.imgse.zzbc.qihoo.net  
    w008.imgse.zzbc.qihoo.net  
    w009.imgse.zzbc.qihoo.net	 
    w010.imgse.zzbc.qihoo.net	 
    w011.imgse.zzbc.qihoo.net	 
    w012.imgse.zzbc.qihoo.net	 
    w013.imgse.zzbc.qihoo.net	 
    w014.imgse.zzbc.qihoo.net	 
    w015.imgse.zzbc.qihoo.net	 
    w016.imgse.zzbc.qihoo.net	 
    w017.imgse.zzbc.qihoo.net	 
    w018.imgse.zzbc.qihoo.net	 
    w019.imgse.zzbc.qihoo.net	 
    w020.imgse.zzbc.qihoo.net	 
    w021.imgse.zzbc.qihoo.net	 
    w022.imgse.zzbc.qihoo.net	 
    w023.imgse.zzbc.qihoo.net	 
    w024.imgse.zzbc.qihoo.net	 
    ';
    echo "输入w[?].${MAIN_DOMAIN}服务器编号: (退出:q)" 
    clusters_confirm
    host="w${num}.$MAIN_DOMAIN"
fi
echo " Connecting $host ... "
ssh $host
